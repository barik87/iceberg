description = 'Google UI tests'

dependencies {
    compile project(':config')
    compile project(':business-steps:google-ui-steps')
    compile "com.epam.reportportal:agent-java-testng:${depVersions.rpAgentJavaTestNg}"
    compile "org.codehaus.groovy:groovy-all:${depVersions.groovy}"
    testCompile "org.testng:testng:${depVersions.testng}"
}

test {
    dependsOn 'cleanTest'
    useTestNG()
    include System.getProperty('testng.tests', '**/*.class')
    options {
        parallel = 'methods'
        threadCount = 2
        listeners = ['com.epam.reportportal.testng.ReportPortalTestNGListener'].toSet()
    }

    ignoreFailures = true
    reports.html.enabled = false
    reports.junitXml.enabled = false

    testLogging {
        events "started", "passed", "failed", "skipped"
        exceptionFormat "short"
    }

    systemProperties System.properties
    systemProperties.putIfAbsent('rp.endpoint', '')
    systemProperties.putIfAbsent('rp.uuid', '')
    systemProperties.putIfAbsent('rp.project', '')
    systemProperties.putIfAbsent('rp.launch', 'Google')
    systemProperties.putIfAbsent('rp.mode', 'DEFAULT')
    systemProperties.putIfAbsent('rp.batch.size.logs', '10')

}